<table>
		<thead>
			<tr>
				<th>Supplier <%= @company.title%>: Total Reviews</th>
			</tr>

		</thead>

		<tbody>
			<tr>
			<td>Compliments :
			<%= @compliments.count%></td>
		
			<td>Complaint :
			<%= @complaints.count%></td>
		
			<td><strong>Total</strong>
			<%= @total = @complaints.count + @compliments.count%></td>
		</tr>

		</tbody>
	</table>

    <br/>
	<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
		<thead>
			<tr>
				<th>Supplier <%= @company.title%> :Nature of Compliments</th>
			</tr>

		</thead>

		<tbody>
			<tr>
				<td>Billing/accounts</td>
				<% @billing = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,  @company.id ,'Billing/accounts', 'compliment')%>
				<td><%= @billing.count %></td>
			</tr>
			<tr>
				<td>Booking</td>
				<% @booking = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id , 'Booking', 'compliment')%>
			    <td><%= @booking.count%></td>
			</tr>
			<tr>
				<td>Call centre efficiency</td>
				<% @call_center = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Call centre efficiency', 'compliment')%>
				<td><%= @call_center.count%></td>
			</tr>
			<tr>
			
				<td>Contract</td>
				<%@contract = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Contract', 'compliment')%>
				<td><%= @contract.count%></td>
			</tr>
			<tr>
				<td>Delivery on time</td>
				<% @delivery = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Delivery on time', 'compliment')%>
				<td><%= @delivery.count%></td>
			</tr>
			<tr>
				<td>Feedback</td>
				<%@feedback =  Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Feedback', 'compliment')%>
				<td><%= @feedback.count%></td>
			</tr>
			<tr>
				<td>Going the extra mile</td>
				<% @going_extra = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Going the extra mile', 'compliment')%>
				<td><%= @going_extra.count%></td>
			</tr>
			<tr>
				<td>Great attitude</td>
				<% @great_attitude = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Great attitude', 'compliment')%>
				<td><%= @great_attitude.count%></td>
			</tr>
			<tr>
				<td>Pricing</td>
				<% @pricing = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Pricing', 'compliment')%>
				<td><%= @pricing.count%></td>
			</tr>
			<tr>
				<td>Refund</td>
				<% @refund = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Refund', 'compliment')%>
				<td><%= @refund.count%></td>
			</tr>
			<tr>
				<td>Repairs</td>
				<% @repairs = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Repairs', 'compliment')%>
				<td><%= @repairs.count%></td>
			</tr>
			<tr>
				<td>Stock</td>
				<% @stock = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Stock', 'compliment')%>
				<td><%= @stock.count%></td>
			</tr>
			<tr>
				<td>Other</td>
				<% @others = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Other', 'compliment')%>
				<td><%= @others.count%></td>
			</tr>

		</tbody>
	</table>
    <br/>
	<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
		<thead>
			<tr>
				<th>Supplier <%= @company.title%> :Nature of Complaints</th>
			</tr>

		</thead>

		<tbody>
			<tr>
				<td>Bad attitude</td>
				<% @bad_attitude = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,  @company.id ,'Bad attitude', 'complaint')%>
				<td><%= @bad_attitude.count %></td>
			</tr>
			<tr>
				<td>Billing/Accounts</td>
				<% @billing_account = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id , 'Billing/Accounts', 'complaint')%>
			    <td><%= @billing_account.count%></td>
			</tr>
			<tr>
				<td>Booking query</td>
				<% @booking_query = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Booking query', 'complaint')%>
				<td><%= @booking_query.count%></td>
			</tr>
			<tr>
			
				<td>Breach of contract</td>
				<%@breach_of_contract = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Breach of contract', 'complaint')%>
				<td><%= @breach_of_contract.count %></td>
			</tr>
			<tr>
				<td>Call centre</td>
				<% @call_centre_c = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Call centre', 'complaint')%>
				<td><%= @call_centre_c.count%></td>
			</tr>
			<tr>
				<td>Damaged goods</td>
				<%@damaged_goods =  Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Damaged goods', 'complaint')%>
				<td><%= @damaged_goods.count%></td>
			</tr>
			<tr>
				<td>Expiry date</td>
				<% @expiry = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Expiry date', 'complaint')%>
				<td><%= @expiry.count%></td>
			</tr>
			<tr>
				<td>Feedback/response</td>
				<% @feedback_response = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Feedback/response', 'complaint')%>
				<td><%= @feedback_response.count%></td>
			</tr>
			<tr>
				<td>Hygiene</td>
				<% @hygiene = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Hygiene', 'compliment')%>
				<td><%= @hygiene.count%></td>
			</tr>
			<tr>
				<td>Late/no delivery</td>
				<% @Late_no_delivery = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Late/no delivery', 'complaint')%>
				<td><%= @Late_no_delivery.count%></td>
			</tr>
			<tr>
				<td>Out of stock</td>
				<% @out_of_stock = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Out of stock', 'complaint')%>
				<td><%= @out_of_stock.count%></td>
			</tr>
			<tr>
				<td>Pricing/bar codes</td>
				<% @pricing_bar_codes = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Pricing/bar codes', 'complaint')%>
				<td><%= @pricing_bar_codes.count%></td>
			</tr>
			<tr>
				<td>Repairs/servicing</td>
				<% @repairs_servicing = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Repairs/servicing', 'complaint')%>
				<td><%= @repairs_servicing.count%></td>
			</tr>
			<tr>
				<td>Spam</td>
				<% @spam = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Spam', 'complaint')%>
				<td><%= @spam.count%></td>
			</tr>
			<tr>
				<td>Other</td>
				<% @others_c = Review.where('Date(created_at) >= ? and Date(created_at) <= ? and user_id is not null and company_id = ? and nature_of_review = ? and review_type = ?',1.year.ago, Date.today,@company.id,'Other', 'complaint')%>
				<td><%= @others_c.count%></td>
			</tr>
		</tbody>
	</table>