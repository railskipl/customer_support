<%= stylesheet_link_tag    "jquery.ui.datepicker" %>
<style>
.newdropdown
{
font-family:corbel;
font-size:13px;
padding:0; 
position:relative;
 display:inline-block;
  width:100%;
background-color:#e2e2e4;
-webkit-box-shadow: 0px 4px 2px -1px #dadada;
    -moz-box-shadow: 0px 4px 2px -1px #dadada;
    box-shadow: 0px 4px 2px -1px #dadada;
}

select.field11 option:hover {
     box-shadow: 0 0 10px 100px #fbaf3d inset;
    -webkit-box-shadow: 0 0 10px 100px #fbaf3d inset;
}

select.field12 option:hover {
       box-shadow: 0 0 10px 100px #fbaf3d inset;
       -webkit-box-shadow: 0 0 10px 100px #fbaf3d inset;
}
</style>
<%= form_for(@review) do |f|%>
<% if @review.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@review.errors.count, "error") %> prohibited this review from being saved:</h2>

      <ul>
      <% @review.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
      
            <%if  @review.review_type == 'complaint' || params[:review_type] == 'complaint'%>
            <img src="/assets/complaint-small.png" alt="" title="Xema Xema" class="left-align">
            <div class="cmp-head">Please give details of your <span>Complaint</span></div>
            <% else %>
            <img src="/assets/compliment_small.png" alt="" title="Xema Xema" class="left-align">
            <div class="cmp-head">Please give details of your <span style="color:#008000;">Compliment</span></div>
            <% end %>
      
        
        <div class="clear"></div>
        <div class="max-box">
            
            <div class="join-form-box">
            
                <div class="login-field-box4">
                    <div class="text-box1">Subject *</div>
                    <%= f.text_field :title, required: true, "maxlength"=>"60", "min" => "1","max" => "35", :autofocus=>true, :class => "field4",:placeholder => "Short, direct, informative, impactful."%>
                </div>
                <div class="clear"></div>
                <div class="form-box1 fr-bt">
                <div class="login-field-box">
                    <div class="text-box1">Nature Of Review*</div>
                   <%= f.select :nature_of_review, @nature_of_reviews.map { |nr| [nr.title]}, {:prompt =>"Select Nature of Review"},:class=>"field11", onchange: "CheckOther2()" %>
            
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Incident Date *</div>
                    <%= f.text_field :date , :value => @review.date.strftime("%d-%m-%Y"), :id => "datepicker1",required: true ,:class => "field1" ,:placeholder => "Incident Date"%>
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Industry *</div>
                   <%= f.collection_select :industry_id, Industry.order(:title) + [Industry.new(:id => Industry.last.id,:title => "Other")], :id,:title,{:include_blank=>"Select Industry"},:rel => "/industry/companies_by_industry",:class=>"field11",  required: true, onchange: 'CheckOther();'%>
              
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Company *</div>
                    <%= f.collection_select :company_id, @companies, :id, :title,  {:include_blank=>"Select Company"}, :rel => "/company/towns_by_company",:class=>"field11", required: true%>
            
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Town *</div>
                   <%= f.collection_select :town_id, @towns+ [Town.new(:id => Town.last.id + 1,:title => "Other")], :id, :title, {:include_blank=>"Select Town"}, :rel => "/town/locations_by_town_and_company",:class=>"field11",  required: true,:onchange=> "CheckOther_town()"%>
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Location *</div>
                  <%= f.collection_select :location_id, @locations ,:id ,:title, {:include_blank=>"Select Location"},:class=>"field11",  required: true%>
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">Person Responsible</div>
                   <%= f.text_field :personal_responsible, "maxlength"=>"60", "min" => "1","max" => "60" ,:class => "field1", :placeholder => "For better follow-up." %>
                </div>
                <div class="clear"></div>
                
            </div>
            
                <div class="form-box2 fr-bt">
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                        <input type="text" id="nature" name="nature" class="field1" placeholder="Other">
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box12" style="font-family:andlso;font-size:15px;">Incident Time</div>
                 <%= f.time_select :datetime,{},:class=>"field12"%>
                    
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                    <input type="text" id="other_type" name="other_type" class="field1" placeholder="Other">
                
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                    <input type="text" id="txt_review_company_id" name="txt_review_company_id" class="field1" placeholder="Other">
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                    <input type="text" id="other_town" name="txt_review_town_id" class="field1"  placeholder="Other">
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                        <input type="text" id="txt_review_location_id" name="txt_review_location_id" class="field1" placeholder="Other">
                </div>
                <div class="clear"></div>
                
                <div class="login-field-box">
                    <div class="text-box12" style="font-family:andlso;font-size:15px;">Account Details</div>
                    <%= f.text_field :account_details ,"maxlength"=>"20", "min" => "1","max" => "20" ,:class => "field1",:placeholder => "This will not be published."%>
                </div>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
                <div class="login-field-box4">
                    <div class="text-box1">Your &nbsp;Experience *</div>
               
                    <%= f.text_area :message, "min" => "1","max" => "1200",:rows=>"5",:class=>"text-area4 fr-bt",:placeholder=>"Your review will be vetted before being published." %>
                        
                </div>
                <div class="clear"></div>
                <span style="float:right;">1200 Characters</span>
                
         <%= f.hidden_field :guest, :value => "guest_user" %>

        <% if params[:review_type] == "complaint" %>
        <div class="clear"></div>
        <div class="login-field-box4">
                    <div class="text-box1">Desired Outcome *</div>
                      <%= f.text_area :desired_outcome, "maxlength"=>"1200", "min" => "1","max" => "200", :class=> "text-area4 fr-bt", :placeholder=>"What action would you like from the company?"%>
                    
                </div>
                   <div class="clear"></div>
                <span style="float:right;">200 Characters</span>
        <% end %>

             
                <div class="clear"></div>
                <div class="login-field-box4">
                    <div class="text-box1">Upload File</div>
                    <!--<div id='file_browse_wrapper'>
                    <input type='file' id='file_browse' />
                    </div>-->
                    <%= f.file_field :file %>
                </div>
                <div class="clear"></div>
                <div class="login-field-box">
                    <div class="text-box1">&nbsp;</div>
                    
                </div>
                <div class="clear"></div>
                <div class="check-one">
                    <input type="checkbox" name="checkbox" value="check" id="ab" class="ch-box" />
                  <label for="field_terms"> <%=link_to " I agree to the Terms & Conditions *", "/terms-of-use" ,:target => "new", :style => "color:#fbaf3d;font-family:andlso;font-size:15px;" %></label>
                </div>
                        <%= recaptcha_tags %>
                        <%= f.hidden_field :review_type ,:value=>(params[:review_type] ? params[:review_type] :  @review.review_type ) %>
                <br/>
                <%= f.submit "Xema" ,:id => "check_checkbox",:class=>"btn2 left-align"%>
            
            
            </div>
            <% end %>
           
           
          













<script type="text/javascript">

$('#check_checkbox').click(function (e) {
	var a = document.getElementById("ab")
	if (!a.checked){
		alert("Select Checkbox");
		return false;
	}
	else{
	 var con = confirm("Submit your Review?\nClick OK to submit or CANCEL to continue writing your review.");
	 if (con == false){
	 	 e.preventDefault();
	 }

	}

});

$( document ).ready(function() {
	$("#other_type").hide();
	$("#nature").hide();
	$("#other_town").hide();
});

function CheckOther()
{
  if (document.getElementById("review_industry_id").value == <%= Industry.last.id %>){
        $("#other_type").show();
    }     
    else{
       $("#other_type").hide();
    }     
}



function CheckOther2()
{
  if (document.getElementById("review_nature_of_review").value == "Other"){
        $("#nature").show();
    }     
    else{
       $("#nature").hide();
    }     
}

function CheckOther_town()
{
  if (document.getElementById("review_town_id").value == <%= Town.last.id + 1 %>){
        $("#other_town").show();
    }     
    else{
       $("#other_town").hide();
    }     
}


</script>